#!/bin/bash
# Toggle or launch a named scratchpad
# Usage: omarchy-scratchpad <name> <command>

NAME=$1
CMD=$2
WORKSPACE="special:$NAME"

if [ -z "$NAME" ] || [ -z "$CMD" ]; then
    echo "Usage: omarchy-scratchpad <name> <command>"
    exit 1
fi

# Check if any window exists in the special workspace
if hyprctl clients -j | jq -e ".[] | select(.workspace.name == \"$WORKSPACE\")" > /dev/null 2>&1; then
    # Window exists, toggle the workspace visibility
    hyprctl dispatch togglespecialworkspace "$NAME"
else
    # No window, launch the command in the special workspace and show it
    hyprctl dispatch exec "[workspace $WORKSPACE]" "$CMD"
    sleep 0.3
    hyprctl dispatch togglespecialworkspace "$NAME"
fi
